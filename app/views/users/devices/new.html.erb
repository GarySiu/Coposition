<h1>Device Creation</h1>
<%= form_for @device, url: {action: "create"}, html: {class: "form-group"} do |f| %>
  <%= label(:name, "Enter a name for the device", class: "control-label") %>
  <%= f.text_field(:name, class: "form-control input-lg fifth-width", placeholder: "Laptop") %>
  </br>
  <%= label(:uuid, "Enter existing UUID", class: "control-label") %>
  <%= f.text_field(:uuid, class: "form-control input-lg fifth-width", placeholder: "(Optional) 15 digits, no spaces") %>
  <%= check_box_tag :create_checkin, id:"create_checkin" %>
  <%= f.label "create_checkin", for:"create_checkin", id:"create_checkin" %>
  </br></br>
  <%= f.submit("Add", class: "form-control btn btn-default", id: "add_button") %>
  <%= hidden_field_tag('location', nil) %>
<% end %>

<script>
$("#create_checkin").change(function(){
  if ($('#create_checkin').prop('checked')){
    $('#add_button').addClass('disabled');
    $('#add_button').prop('disabled', true);
  } else {
    $('#add_button').removeClass('disabled');
    $('#add_button').prop('disabled', false);
  }
  if($('#mapholder').length === 0){
    $('#new_device').after("<%= j (render partial: 'preview_map') %>");
  }
  if($('#mapholder').attr('src') !== undefined){
    $('#add_button').removeClass('disabled');
    $('#add_button').prop('disabled', false);
  }
});
</script>
